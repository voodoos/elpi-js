# ELpi-js

This project aims to provide an easy way to use the *Elpi lambda-prolog interpreter* ([homepage here](https://github.com/LPCIC/elpi/)), written in OCaml, in a completely web based setting.

This is done in a three step process :

- The Elpi_api in OCaml is compiled into a web worker using the [js_of_ocaml]() compiler. It creates the `lib/elpi-js.js` from `.ml` sources in the `src` folder.
- A small API is given to handle the lifecycle of the worker and communicate with it in the `lib/elpi-api.js` file.
- Finally a set of bindings for ReasonML is provided [TODO] for easy use of the api in web oriented projects.

## Using it in a node-based project
The project is not yet published to npm, but you can add it to your project via git :
````
yarn add https://github.com/voodoos/elpi-js
```

And then simply use the javascript sources in the `node_modules/elpi-js/lib` folder or ask `bsb`to use the Reason bindings by adding `elpi-js` to `bs-dependencies` in your `bsconfig.json`.


## API documentation

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [Elpi][1]
    -   [start][2]
    -   [compile][3]
    -   [queryAll][4]
    -   [restart][5]
-   [Elpi][6]
    -   [start][7]
    -   [compile][8]
    -   [queryAll][9]
    -   [restart][10]

## Elpi

Elpi-api
This file provide a small api to communicate
with elpi-worker to run lambda-prolog programs
in the browser

**Parameters**

-   `loggerCB`  
-   `answerCB`  
-   `path`   (optional, default `""`)

### start

Starts the Elpi Worker

### compile

Sends the query to the worker. The worker will
then send successivley all the answers to that query.

**Parameters**

-   `files`  

### queryAll

Sends the query to the worker. The worker will
then send successivley all the answers to that query.

**Parameters**

-   `code` **[string][11]** The code of the query. It must end by a dot.
      For example "plus 2 4 Res."

### restart

Stop and restart the Elpi Worker

## Elpi

The main class, handling the lifecycle of
the Elpi Worker.

**Parameters**

-   `loggerCB`  
-   `answerCB`  
-   `path` **[string][11]** = ""
      The path of the directory containing 
     the elpi-worker.js file. Must be "" or 
     a path enfind by "\\" like "some/path/".
     Defaults to "". (optional, default `""`)
-   `The` **loggerCB** callback used when the Worker asks for logging
-   `The` **answerCB** callback used when the Worker gives an answer

### start

Starts the Elpi Worker

### compile

Sends the query to the worker. The worker will
then send successivley all the answers to that query.

**Parameters**

-   `files`  

### queryAll

Sends the query to the worker. The worker will
then send successivley all the answers to that query.

**Parameters**

-   `code` **[string][11]** The code of the query. It must end by a dot.
      For example "plus 2 4 Res."

### restart

Stop and restart the Elpi Worker

[1]: #elpi

[2]: #start

[3]: #compile

[4]: #queryall

[5]: #restart

[6]: #elpi-1

[7]: #start-1

[8]: #compile-1

[9]: #queryall-1

[10]: #restart-1

[11]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String
